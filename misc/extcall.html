<html>
<head>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script type="text/javascript">
    
    var f9UserId;
    var f9CallId;

    function makeExternalCall(extNumber){
        //before making the transfer, we need the Five9 User ID of the agent and the call ID of the current call
        $.get( "https://app.five9.com/appsvcs/rs/svc/auth/metadata", function( data ) {
            if (typeof data.userId !== 'undefined'){
                f9UserId = data.userId;
                $.get( "https://app.five9.com/appsvcs/rs/svc/agents/"+f9UserId+"/interactions/calls", function( res ){
                    console.log(res);
                    if(Array.isArray(res) && res.length > 0){
                        //for this example I am assuming only one current call, YMMV
                        f9CallId = res[0].id;
                        //Now we can xfer
                        $.ajax({
                              url: "https://app.five9.com/appsvcs/rs/svc/agents/"+f9UserId+"/interactions/calls/"+f9CallId+"/transfer_to_external_number",
                              type: 'PUT',
                              data: {
                                  "warm": false,
                                  "destination": {
                                    "number": extNumber,
                                    "skipDNCCheck": true
                                  }
                                },
                              success: function(putres) {
                                console.log(putres);
                              }
                            });

                    }else{
                        console.log("not on a call");
                    }
                });
            }else{
                console.log("something happened")
            }
        });
    }

    (function($){
        //IMPORTANT JQUERY AJAX SETTINGS!
        $.ajaxSetup({
            crossDomain: true,
            async: false,
            xhrFields: {
                withCredentials: true
            }
        });
    })(jQuery)
</script>
</head>
<body>
<button type="button" onclick="makeExternalCall('7609355759')">Make External Call</button>
</body>
</html>